<div class="container main">
  <div class="container-max">

    <div class="component-header bottom-border">
      <h4>Workspaces</h4>
    </div>

    <div class="container">


      <div class="card-group" [@drop-in]="workspaces">

        <mat-card *ngFor="let workspace of workspaces; let i=index; trackBy:trackById;">
          <mat-card-title>
            {{workspace.name}}
            <button mat-button color="primary" type="button" (click)='manageUsersClicked(workspace)'>
              <mat-icon>close</mat-icon>
            </button>
          </mat-card-title>
          <mat-card-content>
            <p>{{workspace.description}}</p>
            <small class="text-muted">Last updated {{workspace.updatedAt | date:'shortTime'}}</small>
          </mat-card-content>

          <mat-card-actions>
            <button mat-raised-button color="primary" class="action-button" type="button" (click)='goToProjectsClicked(workspace)'>
              <mat-icon class="action-mat-icon">assessment</mat-icon> Go To Projects
            </button>
            <button mat-button color="primary" class="action-button" type="button" (click)='manageUsersClicked(workspace)'>
              Manage Users
            </button>
            <button mat-button color="primary" class="action-button" type="button" (click)='inviteUsersClicked(workspace)'>
              Invite Users
            </button>
            <button mat-button color="primary" class="action-button" type="button" (click)='exportDataClicked(workspace)'>
              Export Data
            </button>
          </mat-card-actions>
        </mat-card>

        <mat-card>
          <div class="card-body">
            <h5 class="card-title">Create a new Workspace</h5>
            <p class="card-text">Worksapces allow for team collobaration on multiple projectes and are the foundation of
              all workflows within Neptuna.
            </p>

            <mat-card-actions>
              <button mat-button color="primary" (click)='showAddModal(content)'>Create</button>
            </mat-card-actions>

          </div>
          <div class="card-footer">
            <small class="text-muted">Created with by :heart: Joel</small>
          </div>
        </mat-card>
      </div>
    </div>
  </div>
</div>

<ng-template #content let-c="close" let-d="dismiss">
  <div class="modal-header">
    <h4 class="modal-title" id="modal-basic-title">{{selectedWorkspace ? 'Edit Workspace' : 'Add new Workspace'}}</h4>
    <button type="button" class="close" aria-label="Close" (click)="d('Cross click')">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body">
    <form>
      <div class="form-group">
        <div class="input-group">
          <div class="input-group-prepend">
            <span class="input-group-text" id="basic-addon3">Name</span>
          </div>
          <input id="name" class="form-control" placeholder="Project Name" name="name" [(ngModel)]='inputName'>
        </div>
      </div>

      <div class="form-group">
        <div class="input-group">
          <div class="input-group-prepend">
            <span class="input-group-text">Description</span>
          </div>
          <textarea id="description" class="form-control" name="description" aria-label="With textarea" [(ngModel)]='inputDescription'></textarea>
        </div>
      </div>

    </form>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-primary btn-lg btn-block" (click)="c('Save click')">{{selectedWorkspace ? 'Save
      Changes' : 'Save Workspace'}}</button>
  </div>
</ng-template>