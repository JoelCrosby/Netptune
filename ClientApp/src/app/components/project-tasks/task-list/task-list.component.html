<mat-accordion class="tasks-accordion" [@dropIn]="tasks" dragula="DRAGULA_FACTS">
  <mat-expansion-panel *ngFor="let task of tasks; let i=index; trackBy:trackById;">
    <mat-expansion-panel-header>
      <mat-panel-title>
        {{ task.name }}
      </mat-panel-title>
      <mat-panel-description>
          <mat-chip-list>
          <mat-chip color="primary">
            {{ task.project.name }}
          </mat-chip>
          <mat-chip color="accent">
              {{ task.assignee.userName }}
            </mat-chip>
        </mat-chip-list>
      </mat-panel-description>
    </mat-expansion-panel-header>
    
    <p>{{ task.description }}</p>

    <div class="card-chips">
      <mat-chip-list>
        <mat-chip>Owner {{ task.owner?.userName }}</mat-chip>
        <mat-chip>Updated {{ task.updatedAt | date }}</mat-chip>
        <mat-chip>Created {{ task.createdAt | date }}</mat-chip>
      </mat-chip-list>
    </div>

    <mat-action-row>
      <button mat-button color="primary" type="button" (click)='showUpdateModal(task)'>
        Edit
      </button>
      <button mat-button color="primary" type="button" (click)='showDeleteModal(task)'>
        Delete
      </button>
    </mat-action-row>

  </mat-expansion-panel>
</mat-accordion>      
