<div class="container main">
  <div class="container-max">

    <div class="component-header bottom-border">
      <h4>Tasks</h4>
      <button mat-button type="button" class="new-button float-right" (click)='showAddModal()'>
        <i class="fas fa-project-diagram"></i>
        New
      </button>
    </div>

    <div *ngIf="!projectTaskService.tasks">
      <mat-progress-spinner mode="indeterminate"></mat-progress-spinner>
    </div>

    <mat-accordion class="tasks-accordion" [multi]='true' [hideToggle]='false'>

      <div class="container tasks-container" [hidden]='projectTaskService.myTasks.length < 1'>
        <h4 (click)='myTaskspanel.toggle()' id="container-header">My Tasks</h4>
        <mat-expansion-panel [expanded]='true' id="task-expansion" #myTaskspanel>
          <app-task-list [tasks]='projectTaskService.myTasks' dragGroupName="MY_PROJECT_TASKS"></app-task-list>
        </mat-expansion-panel>
      </div>

      <div class="container tasks-container" [hidden]='projectTaskService.completedTasks.length < 1' id="completed-container">
        <h4 (click)='completedTasksspanel.toggle()' id="container-header">Completed Tasks</h4>
        <mat-expansion-panel [expanded]='true' id="task-expansion" #completedTasksspanel>
          <app-task-list [tasks]='projectTaskService.myTasks' dragGroupName="MY_PROJECT_TASKS"></app-task-list>
        </mat-expansion-panel>
      </div>

      <div class="container tasks-container" [hidden]='projectTaskService.tasks.length < 1'>
        <h4 (click)='taskspanel.toggle()' id="container-header">Backlog</h4>
        <mat-expansion-panel [expanded]='true' id="task-expansion" #taskspanel>
          <app-task-list [tasks]='projectTaskService.tasks' dragGroupName="PROJECT_TASKS"></app-task-list>
        </mat-expansion-panel>
      </div>

      <button mat-button *ngIf="projectTaskService.tasks && projectTaskService.tasks.length > 0" type="button" class="btn btn-light float-right"
        id="export-button" (click)='exportProjects()' [disabled]='exportInProgress'>
        Export Projects
      </button>

    </mat-accordion>

  </div>
</div>