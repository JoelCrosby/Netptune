(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{IfTP:function(t,e,n){"use strict";n.r(e),n.d(e,"ProjectTasksModule",(function(){return se}));var s=n("PCNd"),a=n("Yml6"),i=n("DQLy"),c=n("iInd"),o=function(t){return t[t.New=0]="New",t[t.Complete=1]="Complete",t[t.InProgress=2]="InProgress",t[t.OnHold=3]="OnHold",t[t.UnAssigned=4]="UnAssigned",t[t.AwaitingClassification=5]="AwaitingClassification",t[t.InActive=6]="InActive",t}({}),r=n("s7LF"),d=n("iELJ");const l=Object(i.n)("[ProjectTasks] Clear State"),b=Object(i.n)("[ProjectTasks] Load ProjectTasks"),p=Object(i.n)("[ProjectTasks] Load ProjectTasks Success",Object(i.s)()),g=Object(i.n)("[ProjectTasks] Load ProjectTasks Fail",Object(i.s)()),m=Object(i.n)("[ProjectTasks] Create Project Task",Object(i.s)()),k=Object(i.n)("[ProjectTasks] Create Project Task Success",Object(i.s)()),h=Object(i.n)("[ProjectTasks] Create Project Task Fail",Object(i.s)()),u=Object(i.n)("[ProjectTasks] Edit Project Task",Object(i.s)()),O=Object(i.n)("[ProjectTasks] Edit Project Task Success",Object(i.s)()),f=Object(i.n)("[ProjectTasks] Edit Project Task Fail",Object(i.s)()),j=Object(i.n)("[ProjectTasks] Delete Project Task",Object(i.s)()),C=Object(i.n)("[ProjectTasks] Delete Project Task Success",Object(i.s)()),P=Object(i.n)("[ProjectTasks] Delete Project Task Fail",Object(i.s)()),T=Object(i.n)("[ProjectTasks] Select Task",Object(i.s)()),M=Object(i.n)("[ProjectTasks] Clear selected Task"),v=Object(i.n)("[ProjectTasks] Set Inline Edit Active",Object(i.s)());var y=n("IIIA"),_=n("quSY"),w=n("cahD"),x=n("S1Dn"),U=n("jOI6"),I=n("8Y7J"),D=n("Q2Ze"),$=n("e6WT"),F=n("ZTz/"),S=n("UhP/"),B=n("SVse"),N=n("Dxy4");function z(t,e){if(1&t&&(I.Ub(0,"mat-option",11),I.Bc(1),I.Tb()),2&t){const t=e.$implicit;I.mc("value",t),I.Cb(1),I.Cc(t.name)}}function E(t,e){1&t&&(I.Ub(0,"mat-form-field",2),I.Ub(1,"mat-label"),I.Bc(2,"Enter Task Description"),I.Tb(),I.Pb(3,"input",12),I.Tb())}let A=(()=>{class t{constructor(t,e,n){this.store=t,this.dialogRef=e,this.data=n,this.projects$=this.store.select(x.a),this.currentWorkspace$=this.store.select(w.a),this.currentProject$=this.store.select(x.b),this.subs=new _.a,this.showDescriptionField=!1,this.projectFromGroup=new r.e({nameFormControl:new r.c("",[r.q.required,r.q.minLength(4)]),projectFormControl:new r.c,descriptionFormControl:new r.c}),n&&(this.task=n)}get name(){return this.projectFromGroup.get("nameFormControl")}get description(){return this.projectFromGroup.get("descriptionFormControl")}get project(){return this.projectFromGroup.get("projectFormControl")}ngOnInit(){this.store.dispatch(Object(U.h)()),this.task?(this.name.setValue(this.task.name),this.project.setValue(this.task.projectId),this.description.setValue(this.task.description)):(this.projectFromGroup.reset(),this.subs.add(this.currentProject$.subscribe(t=>{this.project.setValue(t)})))}ngOnDestroy(){this.subs.unsubscribe()}close(){this.dialogRef.close()}selectProject(){const t=this.project.value;this.store.dispatch(Object(y.a)({project:t}))}getResult(){this.subs.add(this.currentWorkspace$.subscribe(t=>{this.store.dispatch(m({task:{name:this.name.value,description:this.description.value,workspace:t.slug,projectId:this.project.value.id,assigneeId:void 0,assignee:void 0,status:o.New,sortOrder:0}})),this.dialogRef.close()}))}}return t.\u0275fac=function(e){return new(e||t)(I.Ob(i.h),I.Ob(d.f),I.Ob(d.a,8))},t.\u0275cmp=I.Ib({type:t,selectors:[["app-task-dialog"]],decls:26,vars:7,consts:[["mat-dialog-title",""],[3,"formGroup"],["appearance","outline",1,"w-100"],["matInput","","id","name","formControlName","nameFormControl","placeholder","What do you need to get done?","name","name","aria-label","With textarea","required","",1,"form-control"],["id","type","name","type","placeholder","Project","formControlName","projectFormControl",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],["class","w-100","appearance","outline",4,"ngIf"],["mat-dialog-actions","","align","end"],["mat-stroked-button","",3,"click"],[1,"mr-2"],["mat-flat-button","","color","primary","type","button",3,"click"],[3,"value"],["matInput","","id","description","placeholder","Task Summary","formControlName","descriptionFormControl","name","Description",1,"form-control"]],template:function(t,e){1&t&&(I.Ub(0,"h1",0),I.Bc(1),I.Tb(),I.Ub(2,"form",1),I.Ub(3,"mat-form-field",2),I.Ub(4,"mat-label"),I.Bc(5,"Enter Task Summary"),I.Tb(),I.Pb(6,"textarea",3),I.Ub(7,"mat-hint"),I.Bc(8,"Required"),I.Tb(),I.Tb(),I.Pb(9,"br"),I.Ub(10,"mat-form-field",2),I.Ub(11,"mat-label"),I.Bc(12,"Task Project"),I.Tb(),I.Ub(13,"mat-select",4),I.cc("selectionChange",(function(){return e.selectProject()})),I.Ub(14,"mat-option"),I.Bc(15,"None"),I.Tb(),I.zc(16,z,2,2,"mat-option",5),I.hc(17,"async"),I.Tb(),I.Tb(),I.Pb(18,"br"),I.zc(19,E,4,0,"mat-form-field",6),I.Tb(),I.Ub(20,"div",7),I.Ub(21,"button",8),I.cc("click",(function(){return e.close()})),I.Bc(22,"Close"),I.Tb(),I.Pb(23,"div",9),I.Ub(24,"button",10),I.cc("click",(function(){return e.getResult()})),I.Bc(25),I.Tb(),I.Tb()),2&t&&(I.Cb(1),I.Cc(e.task?"Edit Task":"Add new Task"),I.Cb(1),I.mc("formGroup",e.projectFromGroup),I.Cb(14),I.mc("ngForOf",I.ic(17,5,e.projects$)),I.Cb(3),I.mc("ngIf",e.showDescriptionField),I.Cb(6),I.Dc(" ",e.task?"Save Changes":"Save Task"," "))},directives:[d.g,r.r,r.l,r.f,D.c,D.g,$.b,r.b,r.k,r.d,r.p,D.f,F.a,S.n,B.k,B.l,d.c,N.b],pipes:[B.b],styles:["Mat-Form-Field[_ngcontent-%COMP%]{margin-bottom:1.4rem;width:100%}"]}),t})();var R=n("bm5G"),G=n("DRwZ");const L={loading:!1},q=Object(G.a)(),V=q.getInitialState({loading:!1,loaded:!1,loadingNewTask:!1,deleteState:L,editState:L}),W=Object(i.o)("tasks"),{selectAll:Y}=q.getSelectors(),J=Object(i.q)(W,Y),H=Object(i.q)(J,t=>t.filter(t=>t.status===o.Complete).sort((t,e)=>t.sortOrder-e.sortOrder)),Q=Object(i.q)(J,t=>t.filter(t=>t.status===o.New).sort((t,e)=>t.sortOrder-e.sortOrder)),Z=Object(i.q)(J,t=>t.filter(t=>t.status===o.InActive).sort((t,e)=>t.sortOrder-e.sortOrder)),X=(Object(i.q)(W,t=>t.loading),Object(i.q)(W,t=>t.loaded)),K=Object(i.q)(W,t=>t.selectedTask),tt=Object(i.q)(W,t=>t.inlineEditActive);var et=n("zHaW"),nt=n("O13u"),st=n("ltgo"),at=n("4/QA"),it=n("fcPU"),ct=n("XNiG"),ot=n("xgIS"),rt=n("itXk"),dt=n("UXun"),lt=n("1G5W"),bt=n("gcYM"),pt=n("vkgz"),gt=n("SxV6"),mt=n("Tj54"),kt=n("pMoy");const ht=["taskInlineContainer"],ut=["taskInlineForm"],Ot=["taskInput"];function ft(t,e){if(1&t){const t=I.Vb();I.Sb(0),I.Ub(1,"button",4),I.cc("click",(function(){return I.tc(t),I.gc().addTaskClicked()})),I.Ub(2,"mat-icon"),I.Bc(3,"add"),I.Tb(),I.Ub(4,"span"),I.Bc(5," Add Task "),I.Tb(),I.Tb(),I.Rb()}}function jt(t,e){if(1&t){const t=I.Vb();I.Ub(0,"div",5,6),I.Ub(2,"mat-icon"),I.Bc(3,"drag_indicator"),I.Tb(),I.Pb(4,"mat-checkbox",7),I.Ub(5,"form",8),I.cc("ngSubmit",(function(){return I.tc(t),I.gc().onSubmit()})),I.Pb(6,"input",9,10),I.Tb(),I.Tb()}if(2&t){const t=I.gc();I.Cb(5),I.mc("formGroup",t.taskGroup)}}let Ct=(()=>{class t{constructor(t,e){this.store=t,this.cd=e,this.status=o.New,this.editActive=!1,this.taskGroup=new r.e({taskName:new r.c}),this.onDestroy$=new ct.a}get taskName(){return this.taskGroup.get("taskName")}ngOnInit(){this.currentWorkspace$=this.store.pipe(Object(i.t)(w.a)),this.currentProject$=this.store.pipe(Object(i.t)(x.b)),this.currentUser$=this.store.pipe(Object(i.t)(it.d)),this.inlineEditActive$=this.store.pipe(Object(i.t)(tt),Object(dt.a)()),this.outSideClickListener$=Object(ot.a)(document,"mousedown",{passive:!0}).pipe(Object(lt.a)(this.onDestroy$),Object(bt.a)(200),Object(pt.a)(t=>{!this.editActive||this.containerElementRef.nativeElement.contains(t.target)||this.formElementRef.nativeElement.contains(t.target)||(this.editActive=!1,this.store.dispatch(v({active:!1})),this.outsideClickSubscription.unsubscribe(),this.cd.detectChanges())}))}ngOnDestroy(){this.onDestroy$.next(),this.onDestroy$.complete()}addTaskClicked(){this.editActive=!0,this.store.dispatch(v({active:!0})),this.outsideClickSubscription=this.outSideClickListener$.subscribe(),this.cd.detectChanges(),this.inputElementRef.nativeElement.focus()}onSubmit(){Object(rt.a)([this.currentWorkspace$,this.currentProject$,this.currentUser$]).pipe(Object(gt.a)()).subscribe({next:([t,e,n])=>this.createTask(t,e,n)})}createTask(t,e,n){const s=this.siblings&&this.siblings[this.siblings.length-1];this.store.dispatch(m({task:{name:this.taskName.value,workspace:t.slug,projectId:e.id,status:this.status,sortOrder:s&&s.sortOrder+1||1,assigneeId:n.userId}})),this.taskGroup.reset()}}return t.\u0275fac=function(e){return new(e||t)(I.Ob(i.h),I.Ob(I.h))},t.\u0275cmp=I.Ib({type:t,selectors:[["app-task-inline"]],viewQuery:function(t,e){var n;1&t&&(I.Fc(ht,!0),I.Fc(ut,!0),I.Fc(Ot,!0)),2&t&&(I.qc(n=I.dc())&&(e.containerElementRef=n.first),I.qc(n=I.dc())&&(e.formElementRef=n.first),I.qc(n=I.dc())&&(e.inputElementRef=n.first))},inputs:{status:"status",siblings:"siblings"},decls:5,vars:4,consts:[[1,"task-inline-container"],["taskInlineContainer",""],[4,"ngIf","ngIfElse"],["elseTemplate",""],["mat-button","","disableRipple","true",1,"new-task-button",3,"click"],[1,"inline-task-form"],["taskInlineForm",""],["color","primary","disabled",""],[1,"task-form",3,"formGroup","ngSubmit"],["matInput","","formControlName","taskName","placeholder","What do you need to get done?",1,"inline-task-input"],["taskInput",""]],template:function(t,e){if(1&t&&(I.Ub(0,"div",0,1),I.zc(2,ft,6,0,"ng-container",2),I.zc(3,jt,8,1,"ng-template",null,3,I.Ac),I.Tb()),2&t){const t=I.rc(4);I.Fb("edit-mode",e.editActive),I.Cb(2),I.mc("ngIf",!e.editActive)("ngIfElse",t)}},directives:[B.l,N.b,mt.a,kt.a,r.r,r.l,r.f,$.b,r.b,r.k,r.d],styles:[".task-inline-container[_ngcontent-%COMP%]{width:100%;min-height:40px;max-height:40px;display:flex;flex-direction:row;justify-content:center}.task-inline-container[_ngcontent-%COMP%]   .new-task-button[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:flex-start;transition:background-color .2s ease-in;flex-direction:row;background-color:transparent;border:0;text-align:start;font-family:inherit;font-weight:500;font-size:.8rem;letter-spacing:.125px;padding:0 2.3rem;border-radius:0}.task-inline-container[_ngcontent-%COMP%]   .new-task-button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin:auto 1rem}.task-inline-container[_ngcontent-%COMP%]   .inline-task-form[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:row}.task-inline-container[_ngcontent-%COMP%]   .inline-task-form[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{padding:.5rem}.task-inline-container[_ngcontent-%COMP%]   .inline-task-form[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]{padding:.5rem 0}.task-inline-container[_ngcontent-%COMP%]   .inline-task-form[_ngcontent-%COMP%]   .task-form[_ngcontent-%COMP%]{height:100%;width:100%;padding:0;display:flex;flex-direction:row;justify-content:space-around}.task-inline-container[_ngcontent-%COMP%]   .inline-task-form[_ngcontent-%COMP%]   .inline-task-input[_ngcontent-%COMP%]{width:100%;font-size:14px;font-family:inherit;border:0;background-color:transparent;padding:.2rem 1.2rem}"]}),t})();var Pt=n("Rn6e"),Tt=n("jHLV"),Mt=n("ZFy/"),vt=n("rJgo"),yt=n("f44v"),_t=n("UTQ3");const wt=["app-task-list-item",""];function xt(t,e){if(1&t){const t=I.Vb();I.Ub(0,"button",14),I.cc("click",(function(){return I.tc(t),I.gc().markCompleteClicked()})),I.Ub(1,"mat-icon"),I.Bc(2,"done"),I.Tb(),I.Ub(3,"span"),I.Bc(4,"Mark Complete"),I.Tb(),I.Tb(),I.Ub(5,"button",14),I.cc("click",(function(){return I.tc(t),I.gc().moveToBacklogClicked()})),I.Ub(6,"mat-icon"),I.Bc(7,"assignment_returned_outline"),I.Tb(),I.Ub(8,"span"),I.Bc(9,"Move to Backlog"),I.Tb(),I.Tb(),I.Ub(10,"button",14),I.cc("click",(function(){return I.tc(t),I.gc().deleteClicked()})),I.Ub(11,"mat-icon"),I.Bc(12,"delete"),I.Tb(),I.Ub(13,"span"),I.Bc(14,"Delete"),I.Tb(),I.Tb()}}let Ut=(()=>{class t{constructor(t,e){this.store=t,this.dialog=e,this.checked=!1}titleClicked(){this.store.dispatch(T({task:this.task}))}editClicked(){this.store.dispatch(u({task:this.task}))}deleteClicked(){this.dialog.open(Pt.a,{data:{title:"Are you sure you want to delete task?",content:`Delete task - ${Tt.a.truncate(this.task.name)}`,confirm:"Delete"}}).afterClosed().subscribe(t=>{t&&this.store.dispatch(j({task:this.task}))})}markCompleteClicked(){this.store.dispatch(u({task:Object.assign(Object.assign({},this.task),{status:o.Complete})}))}moveToBacklogClicked(){this.store.dispatch(u({task:Object.assign(Object.assign({},this.task),{status:o.InActive})}))}}return t.\u0275fac=function(e){return new(e||t)(I.Ob(i.h),I.Ob(d.b))},t.\u0275cmp=I.Ib({type:t,selectors:[["","app-task-list-item",""]],inputs:{task:"task"},attrs:wt,decls:19,vars:8,consts:[[1,"task-card"],[1,"task-header"],[1,"task-header-title"],["cdkDragHandle","","mat-icon-button","","aria-label","more","matTooltip","click for more options. click and hold to drag task",3,"matTooltipShowDelay","matMenuTriggerFor"],["color","primary",3,"ngModel","ngModelChange"],[1,"title",3,"click"],[1,"task-footer"],[1,"chip-list"],["ariaOrientation","horizontal"],["color","primary"],[1,"chip-spacer"],["size","24","textSizeRatio","2",1,"task-card-user-chip",3,"name"],["menu","matMenu"],["matMenuContent",""],["mat-menu-item","",3,"click"]],template:function(t,e){if(1&t&&(I.Ub(0,"div",0),I.Ub(1,"div",1),I.Ub(2,"div",2),I.Ub(3,"button",3),I.Ub(4,"mat-icon"),I.Bc(5,"drag_indicator"),I.Tb(),I.Tb(),I.Ub(6,"mat-checkbox",4),I.cc("ngModelChange",(function(t){return e.checked=t})),I.Tb(),I.Ub(7,"div",5),I.cc("click",(function(){return e.titleClicked()})),I.Bc(8),I.Tb(),I.Tb(),I.Ub(9,"div",6),I.Ub(10,"div",7),I.Ub(11,"mat-chip-list",8),I.Ub(12,"mat-chip",9),I.Bc(13),I.Tb(),I.Pb(14,"div",10),I.Tb(),I.Tb(),I.Pb(15,"ngx-avatar",11),I.Ub(16,"mat-menu",null,12),I.zc(18,xt,15,0,"ng-template",13),I.Tb(),I.Tb(),I.Tb(),I.Tb()),2&t){const t=I.rc(17);I.Fb("task-item-selected",e.checked),I.Cb(3),I.mc("matTooltipShowDelay",1200)("matMenuTriggerFor",t),I.Cb(3),I.mc("ngModel",e.checked),I.Cb(2),I.Dc(" ",e.task.name," "),I.Cb(5),I.Dc(" ",e.task.projectName," "),I.Cb(2),I.mc("name",e.task.ownerUsername)}},directives:[N.b,st.b,Mt.a,vt.d,mt.a,kt.a,r.k,r.n,yt.b,yt.a,_t.a,vt.e,vt.a,vt.b],styles:['.task-card[_ngcontent-%COMP%]   .task-header[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:center}.task-card[_ngcontent-%COMP%]   .task-header[_ngcontent-%COMP%]   .card-chips[_ngcontent-%COMP%]{justify-content:flex-end}.task-card[_ngcontent-%COMP%]   .task-header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{margin-left:1.2rem;font-size:14px;cursor:pointer;white-space:nowrap}.task-card[_ngcontent-%COMP%]   .task-header[_ngcontent-%COMP%]   .input-group-prepend[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], .task-card[_ngcontent-%COMP%]   .task-header[_ngcontent-%COMP%]   .input-group-prepend[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:10rem}.task-card[_ngcontent-%COMP%]   .task-header[_ngcontent-%COMP%]   .fas[_ngcontent-%COMP%]{margin-right:1.4rem}.task-card[_ngcontent-%COMP%]   .task-header[_ngcontent-%COMP%]   mat-divider[_ngcontent-%COMP%]{margin-top:2em;margin-bottom:2em}.task-card[_ngcontent-%COMP%]   .task-header[_ngcontent-%COMP%]   .task-header-title[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:flex-start;margin-top:auto;margin-bottom:auto;align-items:center}.task-card[_ngcontent-%COMP%]   .task-header[_ngcontent-%COMP%]   .task-header-title[_ngcontent-%COMP%]   .mat-checkbox[_ngcontent-%COMP%]{margin:auto}.task-card[_ngcontent-%COMP%]   .task-header[_ngcontent-%COMP%]   .task-footer[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:flex-end}.task-card[_ngcontent-%COMP%]   .task-header[_ngcontent-%COMP%]   .chip-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;height:100%;margin-right:.4rem}.task-card[_ngcontent-%COMP%]   .task-header[_ngcontent-%COMP%]   .chip-spacer[_ngcontent-%COMP%]{width:.4rem}.task-card[_ngcontent-%COMP%]   .task-header[_ngcontent-%COMP%]   .mat-standard-chip[_ngcontent-%COMP%]{min-height:24px!important}.task-card[_ngcontent-%COMP%]   .task-header[_ngcontent-%COMP%]   .expand-icon[_ngcontent-%COMP%]{width:24px;height:24px;line-height:24px;margin-left:.4rem;visibility:hidden}.task-card[_ngcontent-%COMP%]   .task-header[_ngcontent-%COMP%]   .task-card-user-chip[_ngcontent-%COMP%]{margin-right:.6rem;font-size:12px/24px "Roboto",sans-serif!important}.task-card[_ngcontent-%COMP%]   .task-header[_ngcontent-%COMP%]:hover   .expand-icon[_ngcontent-%COMP%]{visibility:visible}@media only screen and (max-width:900px){.task-header[_ngcontent-%COMP%]{flex-direction:column}.chip-list[_ngcontent-%COMP%]{display:none}}@media only screen and (max-width:600px){.mat-card[_ngcontent-%COMP%]:not([class*=mat-elevation-z]){background-color:transparent!important;border:0!important;box-shadow:none!important}}'],data:{animation:[R.d]}}),t})();function It(t,e){if(1&t&&I.Pb(0,"div",7),2&t){const t=e.$implicit;I.mc("task",t)("cdkDragData",t)}}const Dt=function(t,e){return{tasks:t,status:e}};function $t(t,e){if(1&t){const t=I.Vb();I.Sb(0),I.Ub(1,"div",4),I.cc("cdkDropListDropped",(function(e){return I.tc(t),I.gc().drop(e)})),I.zc(2,It,1,2,"div",5),I.Pb(3,"app-task-inline",6),I.Tb(),I.Rb()}if(2&t){const t=I.gc();I.Cb(1),I.mc("cdkDropListData",I.pc(4,Dt,t.tasks,t.status)),I.Cb(1),I.mc("ngForOf",t.tasks),I.Cb(1),I.mc("status",t.status)("siblings",t.tasks)}}function Ft(t,e){if(1&t&&(I.Sb(0),I.Pb(1,"app-task-inline",9),I.Ub(2,"div",10),I.Ub(3,"div",11),I.Pb(4,"i",12),I.Ub(5,"h4",13),I.Bc(6),I.Tb(),I.Tb(),I.Tb(),I.Rb()),2&t){const t=I.gc(2);I.Cb(1),I.mc("status",t.status),I.Cb(5),I.Dc(" ",t.emptyMessage," ")}}function St(t,e){1&t&&(I.Ub(0,"div",14),I.Pb(1,"div",15),I.Tb())}function Bt(t,e){if(1&t&&(I.zc(0,Ft,7,2,"ng-container",2),I.hc(1,"async"),I.zc(2,St,2,0,"ng-template",null,8,I.Ac)),2&t){const t=I.rc(3),e=I.gc();I.mc("ngIf",I.ic(1,2,e.loaded))("ngIfElse",t)}}let Nt=(()=>{class t{constructor(t){this.store=t}ngOnInit(){}drop(t){t.previousContainer===t.container?Object(st.f)(t.container.data.tasks,t.previousIndex,t.currentIndex):Object(st.g)(t.previousContainer.data.tasks,t.container.data.tasks,t.previousIndex,t.currentIndex);const e=t.container.data.tasks,n=e[t.currentIndex-1],s=e[t.currentIndex+1],a=n&&n.sortOrder,i=s&&s.sortOrder,c=Object(at.a)(a,i),{status:o}=t.container.data,{data:r}=t.item;r.sortOrder===c&&r.status===o||this.moveTask(r,o,c)}moveTask(t,e,n){this.store.dispatch(u({task:Object.assign(Object.assign({},t),{status:e,sortOrder:n})}))}}return t.\u0275fac=function(e){return new(e||t)(I.Ob(i.h))},t.\u0275cmp=I.Ib({type:t,selectors:[["app-task-list-group"]],inputs:{groupName:"groupName",tasks:"tasks",header:"header",emptyMessage:"emptyMessage",loaded:"loaded",status:"status"},decls:8,vars:5,consts:[[1,"tasks-container"],[1,"task-list"],[4,"ngIf","ngIfElse"],["elseTemplate",""],["cdkDropList","",1,"task-list-group",3,"cdkDropListData","cdkDropListDropped"],["cdkDrag","","class","task-drag","app-task-list-item","",3,"task","cdkDragData",4,"ngFor","ngForOf"],[3,"status","siblings"],["cdkDrag","","app-task-list-item","",1,"task-drag",3,"task","cdkDragData"],["loadedElseTemplate",""],[3,"status"],[1,"list-empty"],[1,"list-empty-mark"],[1,"far","fa-compass"],[1,"empty-text"],[1,"spinner-container"],[1,"typing-loader"]],template:function(t,e){if(1&t&&(I.Ub(0,"div",0),I.Ub(1,"h4"),I.Bc(2),I.Tb(),I.Ub(3,"div",1),I.zc(4,$t,4,7,"ng-container",2),I.hc(5,"async"),I.zc(6,Bt,4,4,"ng-template",null,3,I.Ac),I.Tb(),I.Tb()),2&t){const t=I.rc(7);I.Cb(2),I.Dc(" ",e.header," "),I.Cb(2),I.mc("ngIf",I.ic(5,3,e.loaded)&&e.tasks.length)("ngIfElse",t)}},directives:[B.l,st.c,B.k,Ct,st.a,Ut],pipes:[B.b],styles:[".tasks-container[_ngcontent-%COMP%]{transition:all .6s}.task-list[_ngcontent-%COMP%]{min-height:196px;overflow:hidden;display:flex;flex-direction:column}.task-list-group[_ngcontent-%COMP%]{min-height:4rem}@media (min-width:600px){.task-list[_ngcontent-%COMP%]{min-height:196px;border-radius:.2rem;overflow:hidden;display:block}h4[_ngcontent-%COMP%]{margin-left:0}}.cdk-drag-preview[_ngcontent-%COMP%]{box-sizing:border-box;border-radius:.4rem;overflow:hidden;box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:.2}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(.24,0,.2,1)}.task-drag[_ngcontent-%COMP%]:last-child{border:0}.task-list[_ngcontent-%COMP%]   .cdk-drop-list-dragging[_ngcontent-%COMP%]   .task-drag[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(.24,0,.2,1)}.list-empty[_ngcontent-%COMP%], .list-empty[_ngcontent-%COMP%]   .list-empty-mark[_ngcontent-%COMP%]{display:flex;justify-content:center}.list-empty[_ngcontent-%COMP%]   .list-empty-mark[_ngcontent-%COMP%]{font-size:3rem;flex-direction:column;height:100%}.list-empty[_ngcontent-%COMP%]   .list-empty-mark[_ngcontent-%COMP%]   .far[_ngcontent-%COMP%]{margin:1.4rem auto;font-size:6rem}.list-empty[_ngcontent-%COMP%]   .list-empty-mark[_ngcontent-%COMP%]   .empty-text[_ngcontent-%COMP%]{color:grey;margin:0 4rem 3rem}.spinner-container[_ngcontent-%COMP%]{padding:4.6rem}"],data:{animation:[R.b,R.a]}}),t})();function zt(t,e){if(1&t){const t=I.Vb();I.Ub(0,"div",1),I.Ub(1,"h4",2),I.Bc(2," Active Task "),I.Tb(),I.Ub(3,"div",3),I.Ub(4,"div",4),I.Ub(5,"h5"),I.Bc(6),I.Tb(),I.Ub(7,"button",5),I.cc("click",(function(){return I.tc(t),I.gc().closeClicked()})),I.Ub(8,"mat-icon"),I.Bc(9,"close"),I.Tb(),I.Tb(),I.Tb(),I.Ub(10,"div",6),I.Ub(11,"p"),I.Bc(12),I.Tb(),I.Ub(13,"mat-chip-list",7),I.Ub(14,"mat-chip",8),I.Bc(15),I.Tb(),I.Pb(16,"div",9),I.Ub(17,"mat-chip",10),I.Bc(18),I.Tb(),I.Tb(),I.Tb(),I.Tb(),I.Tb()}if(2&t){const t=e.ngIf;I.Cb(6),I.Cc(t.name),I.Cb(6),I.Dc(" ",t.description," "),I.Cb(3),I.Dc(" ",t.projectName," "),I.Cb(3),I.Dc(" ",t.assigneeUsername," ")}}let Et=(()=>{class t{constructor(t){this.store=t,this.$task=this.store.select(K)}ngOnInit(){}closeClicked(){this.store.dispatch(M())}}return t.\u0275fac=function(e){return new(e||t)(I.Ob(i.h))},t.\u0275cmp=I.Ib({type:t,selectors:[["app-task-detail"]],decls:2,vars:3,consts:[["class","tasks-container",4,"ngIf"],[1,"tasks-container"],[1,"task-detail-header","text-ellipsis","w-100"],[1,"task-list","mb-5"],[1,"task-title-bar"],["mat-icon-button","","aria-label","Close task detail panel",3,"click"],[1,"task-body"],["ariaOrientation","horizontal"],["color","primary"],[1,"chip-spacer"],["color","accent"]],template:function(t,e){1&t&&(I.zc(0,zt,19,4,"div",0),I.hc(1,"async")),2&t&&I.mc("ngIf",I.ic(1,1,e.$task))},directives:[B.l,N.b,mt.a,yt.b,yt.a],pipes:[B.b],styles:[".tasks-container[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column}.task-list[_ngcontent-%COMP%]{flex:1;min-height:83.28vh}.task-detail-header[_ngcontent-%COMP%]{overflow:visible;line-height:1rem}.task-title-bar[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;padding:.4rem}.task-title-bar[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{margin:auto 1.4rem;font-size:1rem;font-weight:500;line-height:1rem;overflow:visible}.task-body[_ngcontent-%COMP%]{padding:0 1.6rem}"]}),t})();function At(t,e){if(1&t&&(I.Pb(0,"app-task-list-group",6),I.hc(1,"async")),2&t){const t=e.$implicit,n=I.gc();I.mc("tasks",I.ic(1,6,t.tasks))("header",t.header)("groupName",t.groupName)("status",t.status)("emptyMessage",t.emptyMessage)("loaded",n.loaded$)}}function Rt(t,e){1&t&&(I.Ub(0,"div",7),I.Pb(1,"app-task-detail"),I.Tb())}const Gt=[{path:"**",component:(()=>{class t{constructor(t,e,n){this.snackBar=t,this.dialog=e,this.store=n,this.myTasks$=this.store.pipe(Object(i.t)(Q)),this.completedTasks$=this.store.pipe(Object(i.t)(H)),this.backlogTasks$=this.store.pipe(Object(i.t)(Z)),this.loaded$=this.store.pipe(Object(i.t)(X)),this.selectedTask$=this.store.pipe(Object(i.t)(K)),this.taskGroups=[{groupName:"my-tasks",tasks:this.myTasks$,header:"My Tasks",status:o.New,emptyMessage:"You have no tasks. Click the button in the bottom right to create a task."},{groupName:"completed-tasks",tasks:this.completedTasks$,header:"Completed Tasks",status:o.Complete,emptyMessage:"You currently have no completed tasks. Mark a task as completed and it will show up here."},{groupName:"backlog-tasks",tasks:this.backlogTasks$,header:"Backlog",status:o.InActive,emptyMessage:"Your backlog is currently empty hurray!"}]}ngOnInit(){this.store.dispatch(b())}showAddModal(){this.dialog.open(A,{width:"600px"}).afterClosed().subscribe(()=>{})}}return t.\u0275fac=function(e){return new(e||t)(I.Ob(et.b),I.Ob(d.b),I.Ob(i.h))},t.\u0275cmp=I.Ib({type:t,selectors:[["app-project-tasks"]],decls:8,vars:9,consts:[[3,"verticalPadding"],[1,"task-list-view","row"],[1,"task-list-main"],["cdkDropListGroup","",1,"drag-group"],["class","mb-5",3,"tasks","header","groupName","status","emptyMessage","loaded",4,"ngFor","ngForOf"],["class","task-detail-aside",4,"ngIf"],[1,"mb-5",3,"tasks","header","groupName","status","emptyMessage","loaded"],[1,"task-detail-aside"]],template:function(t,e){1&t&&(I.Ub(0,"app-page-container",0),I.Ub(1,"div",1),I.Ub(2,"div",2),I.hc(3,"async"),I.Ub(4,"div",3),I.zc(5,At,2,8,"app-task-list-group",4),I.Tb(),I.Tb(),I.zc(6,Rt,2,0,"div",5),I.hc(7,"async"),I.Tb(),I.Tb()),2&t&&(I.mc("verticalPadding",!1),I.Cb(2),I.Fb("task-list-shrink",I.ic(3,5,e.selectedTask$)),I.Cb(3),I.mc("ngForOf",e.taskGroups),I.Cb(1),I.mc("ngIf",I.ic(7,7,e.selectedTask$)))},directives:[nt.a,st.d,B.k,B.l,Nt,Et],pipes:[B.b],styles:[".container[_ngcontent-%COMP%]{width:100%;padding-right:0;padding-left:0;margin-right:auto;margin-left:auto}.fas[_ngcontent-%COMP%]{margin-right:1rem}.projects-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;flex-direction:row;margin-bottom:2rem}.icon[_ngcontent-%COMP%]{text-align:center;height:48px;width:48px;font-size:2.5rem;padding:.5rem;display:inline-block;margin:0 1.5rem 0 auto}.action-button[_ngcontent-%COMP%]{margin-right:.8rem}.action-button[_ngcontent-%COMP%]:first-child, .mat-card-actions[_ngcontent-%COMP%]   .mat-raised-button[_ngcontent-%COMP%]:first-child{margin-left:0;margin-right:.8rem!important}.action-mat-icon[_ngcontent-%COMP%]{margin-right:.6rem}.task-list-shrink[_ngcontent-%COMP%]{margin-right:660px}.task-detail-aside[_ngcontent-%COMP%]{position:fixed;width:640px;right:50px;top:72px}.task-list-main[_ngcontent-%COMP%]{width:100%}.task-list-view[_ngcontent-%COMP%]{padding-bottom:24rem}"],data:{animation:[R.b,R.a]}}),t})()}];let Lt=(()=>{class t{}return t.\u0275mod=I.Mb({type:t}),t.\u0275inj=I.Lb({factory:function(e){return new(e||t)},imports:[[c.i.forChild(Gt)],c.i]}),t})();var qt=n("LRne"),Vt=n("zp1y"),Wt=n("eIep"),Yt=n("lJxs"),Jt=n("JIr8"),Ht=n("AytR"),Qt=n("IheW");let Zt=(()=>{class t{constructor(t){this.http=t}get(t){return this.http.get(Ht.a.apiEndpoint+`api/ProjectTasks?workspaceSlug=${t}`)}post(t){return this.http.post(Ht.a.apiEndpoint+"api/ProjectTasks",t)}put(t){return this.http.put(Ht.a.apiEndpoint+"api/ProjectTasks",t)}delete(t){return this.http.delete(Ht.a.apiEndpoint+`api/ProjectTasks/${t.id}`)}}return t.\u0275fac=function(e){return new(e||t)(I.Yb(Qt.b))},t.\u0275prov=I.Kb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var Xt=n("lc/E");let Kt=(()=>{class t{constructor(t,e,n,s){this.actions$=t,this.projectTasksService=e,this.snackbar=n,this.store=s,this.loadProjectTasks$=Object(a.d)(()=>this.actions$.pipe(Object(a.e)(b),Object(Vt.a)(this.store.select(w.a)),Object(Wt.a)(([t,e])=>this.projectTasksService.get(e.slug).pipe(Object(Yt.a)(t=>p({tasks:t})),Object(Jt.a)(t=>Object(qt.a)(g(t))))))),this.createProjectTask$=Object(a.d)(()=>this.actions$.pipe(Object(a.e)(m),Object(Wt.a)(t=>this.projectTasksService.post(t.task).pipe(Object(pt.a)(()=>this.snackbar.open("Task created")),Object(Yt.a)(t=>k({task:t})),Object(Jt.a)(t=>Object(qt.a)(h({error:t}))))))),this.editProjectTask$=Object(a.d)(()=>this.actions$.pipe(Object(a.e)(u),Object(Wt.a)(t=>this.projectTasksService.put(t.task).pipe(Object(pt.a)(()=>!!t.silent&&this.snackbar.open("Task updated")),Object(Yt.a)(t=>O({task:t})),Object(Jt.a)(t=>Object(qt.a)(f({error:t}))))))),this.deleteProjectTask$=Object(a.d)(()=>this.actions$.pipe(Object(a.e)(j),Object(Wt.a)(t=>this.projectTasksService.delete(t.task).pipe(Object(pt.a)(()=>this.snackbar.open("Task deleted")),Object(Yt.a)(t=>C({task:t})),Object(Jt.a)(t=>Object(qt.a)(P({error:t}))))))),this.onWorkspaceSelected$=Object(a.d)(()=>this.actions$.pipe(Object(a.e)(Xt.m),Object(Yt.a)(l)))}}return t.\u0275fac=function(e){return new(e||t)(I.Yb(a.a),I.Yb(Zt),I.Yb(et.b),I.Yb(i.h))},t.\u0275prov=I.Kb({token:t,factory:t.\u0275fac}),t})();const te=Object(i.p)(V,Object(i.r)(l,()=>V),Object(i.r)(b,t=>Object.assign(Object.assign({},t),{loading:!0})),Object(i.r)(g,(t,{error:e})=>Object.assign(Object.assign({},t),{loading:!1,loadProjectsError:e})),Object(i.r)(p,(t,{tasks:e})=>q.setAll(e,Object.assign(Object.assign({},t),{loading:!1,loaded:!0}))),Object(i.r)(m,t=>Object.assign(Object.assign({},t),{loadingNewTask:!0})),Object(i.r)(h,(t,{error:e})=>Object.assign(Object.assign({},t),{loadingNewTask:!1,createNewTaskError:e})),Object(i.r)(k,(t,{task:e})=>q.addOne(e,Object.assign(Object.assign({},t),{loadingNewTask:!1,createdTask:e}))),Object(i.r)(u,t=>Object.assign(Object.assign({},t),{editState:{loading:!0}})),Object(i.r)(f,(t,{error:e})=>Object.assign(Object.assign({},t),{editState:{loading:!1,error:e}})),Object(i.r)(O,(t,{task:e})=>q.upsertOne(e,Object.assign(Object.assign({},t),{editState:{loading:!1}}))),Object(i.r)(j,t=>Object.assign(Object.assign({},t),{deleteState:{loading:!0}})),Object(i.r)(P,(t,{error:e})=>Object.assign(Object.assign({},t),{deleteState:{loading:!1,error:e}})),Object(i.r)(C,(t,{task:e})=>q.removeOne(e.id,Object.assign(Object.assign({},t),{deleteState:{loading:!1}}))),Object(i.r)(T,(t,{task:e})=>Object.assign(Object.assign({},t),{selectedTask:e})),Object(i.r)(M,t=>Object.assign(Object.assign({},t),{selectedTask:void 0})),Object(i.r)(v,(t,{active:e})=>Object.assign(Object.assign({},t),{inlineEditActive:e})));function ee(t,e){return te(t,e)}var ne=n("Fk/C");let se=(()=>{class t{}return t.\u0275mod=I.Mb({type:t}),t.\u0275inj=I.Lb({factory:function(e){return new(e||t)},imports:[[s.a,ne.a,i.j.forFeature("tasks",ee),a.c.forFeature([Kt]),Lt]]}),t})()}}]);